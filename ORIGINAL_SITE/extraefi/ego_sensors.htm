<html>
<head>
<!-- TemplateBeginEditable name="doctitle" -->
<title>ExtraEFI.co.uk Lambda Setup</title>
<!-- TemplateEndEditable -->
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<script type="text/javascript" language="javascript" src="lytebox.js"></script>
<script src="SpryAssets/SpryMenuBar.js" type="text/javascript"></script>
<link rel="stylesheet" href="lytebox.css" type="text/css" media="screen" />
<link rel="stylesheet" type="text/css" href="Main.css" />
<link href="SpryAssets/SpryMenuBarHorizontal.css" rel="stylesheet" type="text/css">
<link href="SpryAssets/SpryMenuBarVertical.css" rel="stylesheet" type="text/css">
<style type="text/css">
<!--
.style27 {color: #000000}
.style28 {color: #EEEEEE}
.style34 {font-weight: bold}
-->
</style>
<!-- TemplateBeginEditable name="head" --><!-- TemplateEndEditable --><!-- TemplateParam name="OptionalRegion1" type="boolean" value="true" -->
</head>

<!--COPY FROM HERE-->
<body bgcolor="#fff" text="#000" background="Pix/backing.jpg" link="#000" vlink="#333" alink="#ccc">

<div id="page-wrapper">
    
    <table width="100%" bgcolor="#000">
        <tr>
            <td><class="style10"><a href="http://extraefi.co.uk"><img src="../../WebstormProjects/extraefiNEW/img/new_title2.jpg" width="100%" alt="ExtraEFI" /></a></td>
        </tr>
  </table>
  
    <table bgcolor="#fff" id="MenuBarHorizontal">
        <tr>
            <td bgcolor="#eee"><ul type="circle" class="MenuBarHorizontal style28" id="MenuBar1">
                <li name="lbNavDisplay">
                    <div align="center"><a class="MenuBarItemSubmenu" href="#">Products</a>
              <ul>
                <li>
                  <div align="center"><a href="MS_All_products.htm" class="MenuBarItemSubmenu">Engine Management</a>
                      <ul>
                        <li>
                          <div align="center"><a href="MS_All_products.htm">MegaSquirt ECU's</a></div>
                        </li>
                        <li>
                          <div align="center"><a href="RV8_Kits.html#pnp">RV8 Plug-n-Play</a></div>
                        </li>
                        <li><a href="RV8_Kits.html">V8 Bundles</a></li>
                      </ul>
                  </div>
                </li>
                <li>
                  <div align="center"><a href="Misc_products.htm" class="MenuBarItemSubmenu">Accessories</a>
                      <ul>
                        <li>
                          <div align="center"><a href="Misc_products.htm">Knock Conditioners, Temp Sensors, Relays, Connectors, Trigger Wheels, Looms and much more</a></div>
                        </li>
                      </ul>
                  </div>
                </li>
                <li>
                  <div align="center"><a href="#" class="MenuBarItemSubmenu">ECU Bundles</a>
                      <ul>
                        <li>
                          <div align="center"><a href="RV8_Kits.html">8 Cylinder Engines</a></div>
                        </li>
                        <li>
                          <div align="center"><a href="RV8_Kits.html#pnp">RV8 Plug-n-Play</a></div>
                        </li>
                      </ul>
                  </div>
                </li>
                <li>
                  <div align="center"><a href="RV8_Kits.html#pnp">Rover V8 ECU's</a></div>
                </li>
                <li><a href="MX5.html">Mazda MX5 ECU's</a></li>
              </ul>
          </div>
        </li>
        <li>
          <div align="center"><a href="#" class="MenuBarItemSubmenu">Support</a>
              <ul>
                <li>
                  <div align="center"><a href="support.htm">Help &amp; Support Files</a></div>
                </li>
                <li>
                  <div align="center"><a href="drawings.htm">Drawings &amp; Diagrams</a></div>
                </li>
                <li>
                  <div align="center"><a href="downloads.htm">Download Area</a></div>
                </li>
                <li>
                  <div align="center"><a href="video.html">Video Help</a></div>
                </li>
              </ul>
          </div>
        </li>
        <li>
          <div align="center"><a href="#" class="MenuBarItemSubmenu">FAQ's</a>
              <ul>
                <li>
                  <div align="center"><a href="faq.htm">FAQ's</a></div>
                </li>
                <li>
                  <div align="center"><a href="glossary.htm">Glossary of MegaSquirt Terms</a></div>
                </li>
                <li><a href="Untitled Item">Compare ECU's</a></li>
                <li><a href="information_OL.htm">Still Confused?</a></li>
                <li>
                  <div align="center"><a href="terms.htm#Warranty">ExtraEFI Warranty</a></div>
                </li>
                <li>
                  <div align="center"><a href="terms.htm">Terms of Use for ExtraEFI website</a></div>
                </li>
                <li>
                  <div align="center"><a href="history.htm">ExtraEFI Company Profile</a></div>
                </li>
              </ul>
          </div>
        </li>
        <li>
          <div align="center"><a href="#" class="MenuBarItemSubmenu">Services</a>
              <ul>
                <li> <a href="services.htm">Fitting &amp; Tuning</a></li>
                <li>
                  <div align="center"><a href="services.htm">MegaSquirt Upgrades</a></div>
                </li>
              </ul>
          </div>
        </li>
        <li>
          <div align="center"><a href="#" class="MenuBarItemSubmenu">New Stuff</a>
            <ul>
              <li><a href="MX5.html">MX5 PnP ECU's</a></li>
              <li><a href="Misc_products.htm">Knock Conditioners</a></li>
              <li><a href="Misc_products.htm#usbadap">Built-in USB Port</a></li>
            </ul>
            </div>
        </li>
        <li>
          <div align="center"><a href="gallery.htm">Gallery</a> </div>
        </li>
        <li>
          <div align="center"><a href="feedback.html">Feedback</a></div>
        </li>
        <li>
          <div align="center"><a href="cobra/index.htm">Cobra Replica</a></div>
        </li>
        <li>
          <div align="center"><a href="gallery.htm#links">Links</a></div>
        </li>
      </ul></td>
    </tr>
  </table>

<div id="email-border">
  <p style="font-size: 24px;">Click <a href="mailto:phil@extraefi.co.uk">here</a> to email me if you have any questions</p>
</div>
<!--STOP COPYING HERE-->

<h1>
Lambda Sensor Setup
</h1>
    <table width="100%" bgcolor="#FFFFFF">
      <!-- TemplateBeginEditable name="EditRegion3" -->
      <tr>
        <td width="100%" height="3504" bgcolor="#666666"><div align="left"><font color="#000000">
          <p align="left">
          <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
          <HTML>
          <!--  		@page { margin: 2cm }  		P { margin-bottom: 0.21cm }  		A:link { so-language: zxx }  	-->
          <BODY LANG="en-GB" DIR="LTR">
The MS ECUs can read from either a  narrow band lambda (0-1V usually) or from the controller of a  wideband lambda (0-5V usually). A wideband lambda sensor needs a  controller to drive the sensor and to give an output that's suitable  for the MS ECU (Innovates, Techedge etc) Most sensors are narrow band  and they only tell the ECU that the mixture is rich or lean of  stoichiometric (14.7 Air:Fuel Ratio). If you have bought a wideband  lambda then the controller tells the ECU the whole range of AFR, so  it is by far a more accurate way of tuning, especially for power. It  is my opinion that a wideband is an essential tool for tuning your  car, without one you will be guessing!<BR>
              The widebands can usually  be programmed so the output voltage can mean different values. I like  to see them set for 0-5V 10-20AFR as this gives the used AFR range  over the maximum range on the output voltage, therefore it should be  the best resolution. </p></font></div>
          <p align="left"><font color="#000000">In  Tuner Studio go to <b>Exhaust Gas Settings</b> or <b>EGO Control:</b></font></p>
          <p align="center"><img src="MS_Extra_Software_Manual_files/MS2_O2.png" width="391" height="554"></p>
          <p align="left"><font color="#000000"><strong>EGO Sensor Type:</strong> <br>Narrow Band or a Wideband. A wideband's output works in the reverse to a narrow band, hence why you need to tell the MS which one you have.</font></p>
          <p align="left" class="style34">1st EGO Sensor Port:</p>
          <p align="left">Use Local, this means the standard O2 input from the main 37 pin loom. Other options are for CAN Bus</p>
          <p align="left"><font color="#000000"><b>Ignition Events per Step:</b><br>set 
            this to a value that would switch about 4x a second at your average cruising 
            speed. </font></p>
          <p align="left"><font color="#000000">4 cylinder assume 3500rpm cruise set 
            Ignition Events per Step to : 29</font></p>
          <p align="left"><font color="#000000">6 cylinder assume 2500rpm cruise set 
            Ignition Events per Step to : 31</font></p>
          <p align="left"><font color="#000000">8 cylinder assume 2000rpm cruise set 
            Ignition Events per Step to : 33</font></p>
          <p align="left"><font color="#000000">You can calculate your:</font></p>
          <p style="text-align: center;" align="left"><font color="#000000"><b>O<sub>2</sub> adjustments per second = ((rpm/120) * cylinders) / ignition events per step</b></font></p>
          <table width="65%" border="1" align="center" bgcolor="#CCCCCC">
            <tr>
              <td><font color="#000000"><p><b>Please Note:</b><br><br>
                If you decide to run without a lambda sensor (either you remove it after 
                tuning or your tuning on a rolling road without a sensor) then set the <b>Controller Step Size</b> to ZERO!!</p></font></td>
            </tr>
          </table>
          <p align="left"><font color="#000000"><strong>Controller Step Size:</strong><br>This is how much the ECU will adjust the fueling by, so if the engine is leaner than the target point it will add 1% to the fueling table. If it is rich it will decrease fueling by 1%. It then waits for the Ignition Events timer before doing the same again.</font></p>
          <p align="left"><font color="#000000"><strong>Controller Authority: </strong><br>This is the maximum the ECU is allowed to adjust the fueling in either direction (Lean or Richen) </font></p>
          <p align="left" class="style27"><strong>MS2- Extra and MS3 </strong>has the option for the control <strong> Algorithm</strong> which can be<strong> Simple or PID. <br><br>
            Simple</strong> is where the ECU looks at the target AFR and compares it to the actual value. If its lean it adds the value you set in <strong>Controller Step size</strong> to the fueling, if its rich it subracts the same value from the fueling. This means its constantly chasing the target AFR in steps up to the<strong> Controller Authority %.</strong> <br><br>
  <strong>PID (Proportianal Integral Derivitive) </strong>is a control method widely used in industry to control systems in a closed loop setup. It starts by calculating an error between its current position and the target position, in this case the AFR target value and current value.<br><br> There are 3 parts to the control system:<br>
  <strong>P</strong> (Proportianal Gain): Determins the reaction to the current error calculated. <br>
  <strong>I </strong>(Integral Gain): Determins the reaction based on previous calculations.<br>
  <strong>D</strong> (Derivitive Gain): Alters the reaction based on how much the error has changed.</p>
          <p align="left" class="style27">A bit of trial and error is needed here, but generally 10-20% is good in Proportianal, 60-110% is good in Intergral and I leave the Derivitaive at Zero.</p>
          <p align="left"><font color="#000000">In <strong>MS1-Extra</strong> there is also a function to change the facility to change the EGO Authority limit when above a certain KPa (boost) value. This is mainly for boosted engines when the lambda could be reading slowly and you don't want the EGO to correct by as much as it can when cruising. In this box you will also find the Target Table selection. If using a wideband then select<strong> For VE Table 1 as ON, </strong>this will enable the target AFR table, so you can get the ECU to aim for different AFRs depending on load, etc.<br><br>
            The <strong>Control Algorithm for AFR Tables </strong> needs to be set the same as your Constants page (Speed Density for MAP or Alpha_N for TPS based setups)</font></p>
          <p align="center"><font color="#000000" size="6"><b>Tuner Studio Settings</b></font></p>
          <p align="left"><font color="#000000"><a name="ms2"></a><font size="5"><b>MS2-Extra and MS3</b></font><font size="4">:</font></font></p>
          <p align="left"><font color="#000000">If you are using a wideband lambda sensor 
            in MS2-Extra or MS3 then you'll need to set the ECU up for the same settings as your sensor. <br>
          Power the ECU up and connect ot Tuner Studio, go into Tools - Unlock Calibration.</font></p>
          <p align="left"><img src="MS_Extra_Software_Manual_files/Unlock.png" width="316" height="175"></p>
          <p align="left">Select Unlocked and Burn <font color="#000000">then Tools - Calibrate AFR 
          Table. </font></p>
          <p align="center"><img src="MS_Extra_Software_Manual_files/CalAFR.png" width="346" height="379"></p>
          <p align="center">Select your controllers output settings and clcik Write to Controller.<br>
          Note that most wideband s can be programmed to give a 0-5V output as 10-20AFR, this is as the example.</p>
          <p align="center"><a href="Templates/software/Lambda_Sensors.pdf">PDF File of this page</a></p>
          <p align="center">&nbsp;</p>
          <p>&nbsp;</p>
        <p>&nbsp;</p></td>
      </tr>
      <!-- TemplateEndEditable -->
    </table>
    <br>
    <!--Footer-->
    <div id="footer">
    <table width="100%">
      <tr>
        <td height="97" background="Pix/new_title1.jpg"><div align="center"><span style="color: #fff;">Content &copy; 
        <a href="http://www.extraefi.co.uk" style="color: #fff;">ExtraEFI</a>. All Rights Reserved.</span><br>
                  <a href="terms.htm" style="color: #fff;">Terms of Use.</a><br>
                  <span style="color: #fff;">Layout of this website was worked on by</span> <a href="http:chrisbrighton.co.uk" target="_blank" style="color: #fff;">
                  Chris Brighton.</a></span></div></td>
      </tr>
    </table>
    </div>

<script type="text/javascript">
<!--
var MenuBar1 = new Spry.Widget.MenuBar("MenuBar1", {imgRight:"SpryAssets/SpryMenuBarRightHover.gif"});
//-->
</script>
</body>
</html>
